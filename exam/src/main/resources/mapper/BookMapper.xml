<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.book.mapper.BookMapper">

<select id="getMaxBno">
select Max(book_no)
from BOOK_TBL_06
</select>

<insert id="insert">
INSERT INTO BOOK_TBL_06(BOOK_NO, BOOK_NAME, BOOK_COVERIMG, BOOK_DATE, BOOK_PRICE, BOOK_PUBLISHER, BOOK_INFO) 
VALUES (#{bookNo}, #{bookName}, #{bookCoverimg}, #{bookDate}, #{bookPrice}, #{bookPublisher}, #{bookInfo})
</insert>

<select id="getBookList">
select *
from BOOK_TBL_06
order by book_no
</select>

<select id="getRentList">
select
 a.book_no "bookNo"
 ,b.book_name "bookName"
 ,SUM(a.rent_price) "rentPrice"
 ,count(a.book_no) "rentNum"
from RENT_TBL_06 a
join BOOK_TBL_06 b
on a.book_no = b.book_no
group by a.book_no ,b.book_name
order by a.book_no
</select>

<select id="getBook">
select *
from BOOK_TBL_06
where book_no = #{bookNo}
</select>
</mapper>